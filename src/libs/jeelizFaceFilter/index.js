/**
 * Jeeliz Face Filter - https://github.com/jeeliz/jeelizFaceFilter
 *
 * Copyright 2018 Jeeliz ( https://jeeliz.com )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function la(b,d,e){return b*(1-e)+d*e}function za(b,d){var e=new XMLHttpRequest;e.open("GET",b,!0);e.withCredentials=!1;e.onreadystatechange=function(){4===e.readyState&&200===e.status&&d(e.responseText)};e.send()}function Ca(b,d,e){return Math.min(Math.max((e-b)/(d-b),0),1)}
function Fa(b){switch(b){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}
function Ga(b,d){var e=d%8;return b[(d-e)/8]>>7-e&1}
function Ia(b){var d=JSON.parse(b);b=d.ne;var e=d.nf,k=d.n,m="undefined"===typeof btoa?Buffer.from(d.data,"base64").toString("latin1"):atob(d.data),l=m.length,r;d=new Uint8Array(l);for(r=0;r<l;++r)d[r]=m.charCodeAt(r);m=new Float32Array(k);l=new Float32Array(e);r=b+e+1;var n,p;for(n=0;n<k;++n){var h=r*n;var w=0===Ga(d,h)?1:-1;var u=h+1;var E=1,F=0;for(p=u+b-1;p>=u;--p)F+=E*Ga(d,p),E*=2;p=F;u=d;E=h+1+b;F=l;var N=0,O=F.length;for(h=E;h<E+O;++h)F[N]=Ga(u,h),++N;for(h=u=0;h<e;++h)u+=l[h]*Math.pow(2,-h-
  1);w=0===u&&0===p?0:w*(1+u)*Math.pow(2,1+p-Math.pow(2,b-1));m[n]=w}return m}
var t=function(){function b(g,B){g=a.createShader(g);a.shaderSource(g,B);a.compileShader(g);return a.getShaderParameter(g,a.COMPILE_STATUS)?g:!1}function d(g,B){g=b(a.VERTEX_SHADER,g);B=b(a.FRAGMENT_SHADER,B);var C=a.createProgram();a.attachShader(C,g);a.attachShader(C,B);a.linkProgram(C);return C}function e(g){void 0===g.$&&(g.$="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===g.ua&&(g.ua=["a0"]);void 0===g.fa&&(g.fa=
  [2]);if(void 0===g.precision||"highp"===g.precision)g.precision=p;g.id=r++;void 0!==g.Rc&&g.Rc.forEach(function(C,da){g.c=g.c.replace(C,g.Fa[da])});g.eb=0;g.fa.forEach(function(C){g.eb+=4*C});g.Ea=d(g.$,"precision "+g.precision+" float;\n"+g.c);g.m={};g.f.forEach(function(C){g.m[C]=a.getUniformLocation(g.Ea,C)});g.attributes={};g.ga_=[];g.ua.forEach(function(C){var da=a.getAttribLocation(g.Ea,C);g.attributes[C]=da;g.ga_.push(da)});if(g.h){a.useProgram(g.Ea);l=g;m=g.id;for(var B in g.h)a.uniform1i(g.m[B],
  g.h[B])}g.Ld=!0}function k(g){Ja.Xc(H);m!==g.id&&(H.Z(),m=g.id,l=g,a.useProgram(g.Ea),g.ga_.forEach(function(B){0!==B&&a.enableVertexAttribArray(B)}))}var m=-1,l=!1,r=0,n=!1,p="highp",h=["u1"],w=["u0"],u={u1:0},E={u0:0},F={u1:0,u2:1},N={u3:0},O={s0:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:h,h:u},s1:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:h,h:u,precision:"lowp"},s2:{c:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",
    f:["u1","u2"],h:F},s3:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",f:h,h:u},s4:{c:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",f:["u1","mask"],h:F},s5:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",f:h,h:u},s6:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",
    f:h,h:u},s7:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",f:["u0","u4"],h:E},s8:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 g=vec4(.25,.25,.25,.25),e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,g);gl_FragColor=b*e;}",f:["u0","u4"],h:E},s9:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",
    f:h,h:u},s10:{c:"uniform sampler2D u1,u5;uniform float u6;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);gl_FragColor=mix(b,a,u6*f);}",f:["u1","u5","u6"],h:{u1:0,u5:1}},s11:{c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u7)+texture2D(u1,vv0+u7*vec2(1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,1.)));}",f:["u1","u7"],h:u},s12:{c:"uniform sampler2D u1;uniform vec4 u8;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 k(float a){if(a==0.)return vec4(0.,0.,0.,0.);float l=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),m=c+127.,b=(a/exp2(c)-1.)*8388608.,d=m/2.,n=fract(d)*2.,o=floor(d),p=e(b,0.,8.),q=e(b,8.,16.),r=n*128.+e(b,16.,23.),j=l+o;return vec4(p,q,r,j)/255.;}void main(){float a=dot(texture2D(u1,vv0),u8);gl_FragColor=k(a);}",
    f:["u1","u8"],h:u},s13:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",f:w,h:E},s14:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(e,a);}",f:w,h:E},s15:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-e,a,step(0.,a));}",f:w,h:E},s16:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-e;gl_FragColor=mix(.1*b,a,step(0.,a));}",
    f:w,h:E},s17:{c:"uniform sampler2D u0,u6,u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u6,vv0),d=texture2D(u9,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",f:["u0","u6","u9"],h:{u0:0,u6:1,u9:2}},s18:{c:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",f:w,h:E},s19:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(.5,.5,.5,.5);void main(){vec4 a=texture2D(u0,vv0),b=log(e+a);gl_FragColor=b;}",
    f:w,h:E},s20:{c:"uniform sampler2D u0;uniform float gain;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=exp(a);}",f:["u0","u10"],h:E},s21:{c:"uniform sampler2D u0,u11;uniform float u12;const vec2 f=vec2(.5,.5);const float g=1e-5;const vec4 h=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u11,f);float b=u12*u12;vec4 c=max(b*a,g*h);gl_FragColor=texture2D(u0,vv0)/c;}",f:["u0","u13","u12"],h:{u0:0,u13:1}},s22:{c:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){float a=u14.x*u14.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u14.y),g=floor(u14.x*fract(b*u14.y)),f=(g*u14.y+d)/a;gl_FragColor=texture2D(u1,f+c/a);}",
    f:["u1","u14"],h:u},s23:{c:"uniform sampler2D u15,u16,u17;varying vec2 vv0;void main(){vec4 a=texture2D(u17,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u15,b),e=texture2D(u16,c);gl_FragColor=d*e;}",f:["u15","u16","u17"],h:{u16:0,u15:1,u17:2}},s24:{c:"uniform float u18;uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec2 a=fract(vv0*u18);vec4 b=texture2D(u15,vv0),c=texture2D(u16,a);gl_FragColor=b*c;}",f:["u16","u15","u18"],h:{u16:0,u15:1}},s25:{c:"uniform float u18;uniform sampler2D u15,u16,u19,u20,u21,u22;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 i=vv0*u18,m=floor(i),c=i-m;vec4 n=texture2D(u15,vv0),d=texture2D(u16,c),a=texture2D(u22,vv0);a=a*255.;vec4 o=texture2D(u19,c),p=texture2D(u20,c),q=texture2D(u21,c),j=step(-g,-a),b=e-j,k=b*step(-e-g,-a);b*=e-k;vec4 h=b*step(-2.*e-g,-a);b*=e-h;vec4 l=b;d=j*d+k*o+h*p+l*q,gl_FragColor=n*d;}",
    f:"u15 u16 u18 u22 u19 u20 u21".split(" "),h:{u16:0,u15:1,u22:3,u19:4,u20:5,u21:6}},s26:{c:"uniform sampler2D u15,u16,u23;uniform float u18,u24,u25,u26;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u24*vv0),g=u24*vv0-a;float b=u18/u24;vec2 c=floor(g*b),d=g*b-c,h=(a+d)/u24;float l=u24*u26/u18;vec2 m=l*c,i=(m+d*u25)/u26,e=step(i,j);vec4 n=texture2D(u15,h),o=texture2D(u16,i),p=n*o*e.x*e.y,k=texture2D(u23,h);gl_FragColor=p*u25*u25+k;}",f:"u15 u16 u18 u24 u25 u26 u23".split(" "),h:{u16:0,
      u15:1,u23:2}},s27:{c:"uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0),b=texture2D(u16,vv0);gl_FragColor=a*b;}",f:["u15","u16"],h:{u16:0,u15:1}},s28:{c:"uniform sampler2D u1,u23;uniform float u27;varying vec2 vv0;void main(){gl_FragColor=texture2D(u23,vv0)+u27*texture2D(u1,vv0);}",f:["u1","u23","u27"],h:{u1:0,u23:1}},s29:{c:"varying vec2 vv0;uniform sampler2D u1;const vec4 g=vec4(1.,1.,1.,1.),e=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,e)*g;}",
    f:h,h:u,precision:"lowp"},s30:{c:"varying vec2 vv0;uniform sampler2D u1;uniform float u28;const vec3 e=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u28)).rgb,c=texture2D(u1,vv0+vec2(u28,u28)).rgb,d=texture2D(u1,vv0+vec2(u28,0.)).rgb;gl_FragColor=vec4(dot(a,e),dot(b,e),dot(c,e),dot(d,e));}",f:["u1","u28"],h:u,precision:"lowp"},s31:{c:"varying vec2 vv0;uniform sampler2D u1;uniform float u28;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u28)).rgb,c=texture2D(u1,vv0+vec2(u28,u28)).rgb,d=texture2D(u1,vv0+vec2(u28,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
    f:["u1","u28"],h:u,precision:"lowp"},s32:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u29;const vec4 g=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u29,vv0.y-u29))*1.,a-=texture2D(u1,vec2(vv0.x-u29,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u29,vv0.y+u29))*1.,a+=texture2D(u1,vec2(vv0.x+u29,vv0.y-u29))*1.,a+=texture2D(u1,vec2(vv0.x+u29,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u29,vv0.y+u29))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u29,vv0.y-u29))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u29))*2.,b-=texture2D(u1,vec2(vv0.x+u29,vv0.y-u29))*1.,b+=texture2D(u1,vec2(vv0.x-u29,vv0.y+u29))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u29))*2.,b+=texture2D(u1,vec2(vv0.x+u29,vv0.y+u29))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),f=texture2D(u2,vv0);gl_FragColor=f.a*e.r*g;}",
    f:["u1","u2","u29"],h:F},s33:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u29;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float i=0.;vec2 l=k*u29,b,c;float d,a,g=0.;for(float f=-4.;f<=4.;f+=1.)for(float e=-4.;e<=4.;e+=1.)b=vec2(f,e),d=length(b)/2.,a=exp(-d*d),c=vv0+l*b,a=1.,i+=a*texture2D(u1,c).r,g+=a;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,c).r-i/g)*j;}",f:["u1","u2","u29"],h:F},s34:{c:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 h=vec2(.5,.5),i=vec2(1.,0.),j=vec2(0.,1.);void main(){vec2 a=vv0-u7*h;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*i),d=texture2D(u3,a+u7*j),k=texture2D(u3,a+u7),l=e(b,c),g=e(d,k);gl_FragColor=e(l,g);}",
    f:["u3","u7"],h:N},s35:{c:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;const vec2 j=vec2(1.,0.),k=vec2(0.,1.),l=vec2(2.,0.),m=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*j),d=texture2D(u3,a+u7*k),g=texture2D(u3,a+u7),i=e(b,c),h=e(d,g);return e(i,h);}void main(){vec2 a=vv0+u7*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u7*l),d=f(a+u7*2.),g=f(a+u7*m),i=e(b,c),h=e(d,g);gl_FragColor=e(i,h);}",f:["u3","u7"],h:N},s36:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",
    f:["u1"],h:u,precision:"lowp"},s37:{c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float d=15444.;void main(){vec4 a=1001./d*texture2D(u1,vv0-3.*u7)+2002./d*texture2D(u1,vv0-2.*u7)+3003./d*texture2D(u1,vv0-u7)+3432./d*texture2D(u1,vv0)+3003./d*texture2D(u1,vv0+u7)+2002./d*texture2D(u1,vv0+2.*u7)+1001./d*texture2D(u1,vv0+3.*u7);gl_FragColor=a;}",f:["u7","u1"],h:u,precision:"lowp"},s38:{c:"uniform sampler2D u1,u30,u31;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float h=.1;void main(){vec4 a=texture2D(u30,vv0),b=texture2D(u31,vv0),c=texture2D(u1,vv0),d=max(g*h,b-a*a),f=sqrt(d);gl_FragColor=(c-a)/f;}",
    f:["u1","u30","u31"],h:{u1:0,u30:1,u31:2}}},T={s39:{c:"uniform float u18,u32;uniform sampler2D u15,u16,u23;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u23,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u18,xyTo=floor(vv0*u18+eps2);float weightSize=toSparsity*u18;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u32*(xyPatch-halfFromSparsity))/u18,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u15,uvWeight)*texture2D(u16,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
    f:["u18","u15","u16","u23","u32"],Fa:["1.1111","gl_FragColor\\*=2.2222;"]},s40:{c:"uniform float u18,u32,u26;uniform sampler2D u15,u16,u23;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u23,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u26,xyTo=floor(vv0*u18+eps2);float weightSize=fromSparsity*u26;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u18;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u32*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u26,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u15,uvWeight)*texture2D(u16,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
    f:"u18 u26 u15 u16 u23 u32".split(" "),Fa:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},H={Wa:function(){return n},l:function(){if(!n){p="highp";for(var g in O)e(O[g],g);t.set("s0");a.enableVertexAttribArray(0);g=Ka.l();n=!0;return g}},Yb:function(g){g.forEach(function(B){H.hb(B)})},hb:function(g){O[g.id]=g;e(g,g.id)},wb:function(g,B,C){B||(B=g);O[B]=Object.create(T[g]);T[g].Fa&&T[g].Fa.forEach(function(da,wa){O[B].c=O[B].c.replace(new RegExp(da,"g"),C[wa])});e(O[B],B)},set:function(g){k(O[g])},
  sc:function(g){return"undefined"!==typeof O[g]},wd:function(){return l.td},Z:function(){-1!==m&&(m=-1,l.ga_.forEach(function(g){0!==g&&a.disableVertexAttribArray(g)}))},bb:function(){var g=0;l.ga_.forEach(function(B,C){C=l.fa[C];a.vertexAttribPointer(B,C,a.FLOAT,!1,l.eb,g);g+=4*C})},ob:function(){a.enableVertexAttribArray(0)},pa:function(){a.vertexAttribPointer(l.ga_[0],2,a.FLOAT,!1,8,0)},Qb:function(g,B){a.uniform1i(l.m[g],B)},v:function(g,B){a.uniform1f(l.m[g],B)},P:function(g,B,C){a.uniform2f(l.m[g],
    B,C)},Yd:function(g,B){a.uniform2fv(l.m[g],B)},Zd:function(g,B){a.uniform3fv(l.m[g],B)},Yc:function(g,B,C,da){a.uniform3f(l.m[g],B,C,da)},Rb:function(g,B){a.uniform4fv(l.m[g],B)},$d:function(g,B){a.uniformMatrix2fv(l.m[g],!1,B)},ae:function(g,B){a.uniformMatrix3fv(l.m[g],!1,B)},be:function(g,B){a.uniformMatrix4fv(l.m[g],!1,B)},H:function(g,B){H.set(g);B.forEach(function(C){switch(C.type){case "4f":a.uniform4fv(l.m[C.name],C.value);break;case "3f":a.uniform3fv(l.m[C.name],C.value);break;case "2f":a.uniform2fv(l.m[C.name],
    C.value);break;case "1f":a.uniform1f(l.m[C.name],C.value);break;case "1i":a.uniform1i(l.m[C.name],C.value);break;case "mat2":a.uniformMatrix2fv(l.m[C.name],!1,C.value);break;case "mat3":a.uniformMatrix3fv(l.m[C.name],!1,C.value);break;case "mat4":a.uniformMatrix4fv(l.m[C.name],!1,C.value)}})},Fd:function(){return"lowp"}};return H}(),a=!1,Ma=function(){function b(h){console.log("ERROR in ContextFeedForward : ",h);return!1}function d(){if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){var h=
  navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);h=[parseInt(h[1],10),parseInt(h[2],10),parseInt(h[3]||0,10)];return 12===h[0]||13===h[0]?!0:!1}return/(Mac)/i.test(navigator.platform)&&((h=navigator.userAgent)?(h=h.match(/Mac OS X (\d+)_(\d+)/),h=3>h.length?!1:[parseInt(h[1],10),parseInt(h[2],10)]):h=!1,h&&10===h[0]&&15===h[1])?!0:!1}var e=!1,k=!1,m=!1,l=!1,r=!0,n=!1,p={A:function(){return e.width},L:function(){return e.height},xd:function(){return e},vd:function(){return a},u:function(){return r},
  flush:function(){a.flush()},xc:function(){n||(n=new Uint8Array(e.width*e.height*4));a.readPixels(0,0,e.width,e.height,a.RGBA,a.UNSIGNED_BYTE,n);return n},zd:function(){return e.toDataURL("image/jpeg")},Ad:function(){I.J();k||(k=document.createElement("canvas"),m=k.getContext("2d"));k.width=e.width;k.height=e.height;var h=p.xc(),w=m.createImageData(k.width,k.height),u,E,F=k.width,N=k.height,O=w.data;for(E=0;E<N;++E){var T=N-E-1;for(u=0;u<F;++u){var H=4*(E*F+u);var g=4*(T*F+u);O[H]=h[g];O[H+1]=h[g+
  1];O[H+2]=h[g+2];O[H+3]=h[g+3]}}m.putImageData(w,0,0);return k.toDataURL("image/png")},yd:function(h){!k&&h&&(k=document.createElement("canvas"),m=k.getContext("2d"));var w=h?k:document.createElement("canvas");w.width=e.width;w.height=e.height;(h?m:w.getContext("2d")).drawImage(e,0,0);return w},l:function(h){h.lc&&!h.ja?e=document.getElementById(h.lc):h.ja&&(e=h.ja);e||(e=document.createElement("canvas"));e.width=h&&void 0!==h.width?h.width:512;e.height=h&&void 0!==h.height?h.height:512;"undefined"===
  typeof h&&(h={});void 0===h.premultipliedAlpha&&(h.premultipliedAlpha=!1);void 0===h.yb&&(h.yb=!0);void 0===h.antialias&&(h.antialias=!1);var w={antialias:h.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:h.premultipliedAlpha,stencil:!1,depth:h.yb};d()||(a=e.getContext("webgl2",w));a?r=!0:((a=e.getContext("webgl",w))||(a=e.getContext("experimental-webgl",w)),r=!1);if(!a)return b("WebGL is not enabled");(l=a.getExtension("WEBGL_lose_context"))&&e.addEventListener("webglcontextlost",
    h.Nc,!1);if(!La.l())return b("Not enough capabilities");if(!La.gc()&&r)return b("Your configuration cannot process color buffer float");a.clearColor(0,0,0,0);a.disable(a.DEPTH_TEST);a.disable(a.BLEND);a.disable(a.DITHER);a.disable(a.STENCIL_TEST);a.GENERATE_MIPMAP_HINT&&a.hint(a.GENERATE_MIPMAP_HINT,a.FASTEST);a.disable(a.SAMPLE_ALPHA_TO_COVERAGE);a.disable(a.SAMPLE_COVERAGE);return!0},Ec:function(){if(!t.l())return!1;a.depthFunc(a.LEQUAL);a.clearDepth(1);return!0}};return p}(),Ja=function(){var b=
  "undefined"===typeof t?JEShaders:t;return{Xc:function(d){b!==d&&(b.Z(),b=d)},Wa:function(){return b.Wa()},pa:function(){b.pa()},bb:function(){b.bb()},Z:function(){b.Z()},set:function(d){b.set(d)}}}(),M=function(){var b,d,e=0,k=-2,m=-2,l=!1,r={reset:function(){m=k=-2},l:function(){l||(b=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,b),a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),a.STATIC_DRAW),d=a.createBuffer(),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,d),a.bufferData(a.ELEMENT_ARRAY_BUFFER,
    new Uint16Array([0,1,2]),a.STATIC_DRAW),r.ha(),l=!0)},a:function(n){var p=e++,h=n.V?n.V.length:0,w="undefined"===typeof n.mode?a.STATIC_DRAW:n.mode,u=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,u);a.bufferData(a.ARRAY_BUFFER,n.Ub instanceof Float32Array?n.Ub:new Float32Array(n.Ub),w);k=p;if(n.V){var E=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,E);if(65536>n.V.length){var F=Uint16Array;var N=a.UNSIGNED_SHORT;var O=2}else F=Uint32Array,N=a.UNSIGNED_INT,O=4;a.bufferData(a.ELEMENT_ARRAY_BUFFER,
    n.V instanceof F?n.V:new F(n.V),w);m=p}var T={fc:function(H){k!==p&&(a.bindBuffer(a.ARRAY_BUFFER,u),k=p);H&&Ja.bb()},dc:function(){m!==p&&(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,E),m=p)},bind:function(H){T.fc(H);T.dc()},rd:function(){a.drawElements(a.TRIANGLES,h,N,0)},sd:function(H,g){a.drawElements(a.TRIANGLES,H,N,g*O)},remove:function(){a.deleteBuffer(u);n.V&&a.deleteBuffer(E);T=null}};return T},ha:function(){-1!==k&&(a.bindBuffer(a.ARRAY_BUFFER,b),k=-1);-1!==m&&(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,
    d),m=-1)},g:function(n,p){n&&M.ha();p&&Ja.pa();a.drawElements(a.TRIANGLES,3,a.UNSIGNED_SHORT,0)},wc:function(){a.deleteBuffer(b);a.deleteBuffer(d)}};return r}(),I=function(){var b,d,e,k=!1,m={w:-2,uc:1};return{l:function(){if(!k){b=a.createFramebuffer();var l=La.u();d=l&&a.DRAW_FRAMEBUFFER?a.DRAW_FRAMEBUFFER:a.FRAMEBUFFER;e=l&&a.READ_FRAMEBUFFER?a.READ_FRAMEBUFFER:a.FRAMEBUFFER;k=!0}},Cd:function(){return d},Sa:function(){return e},ca:function(){return a.FRAMEBUFFER},Gd:function(){return m},ud:function(){return b},
  a:function(l){void 0===l.xb&&(l.xb=!1);var r=l.qa?l.qa:!1,n=l.width,p=void 0!==l.height?l.height:l.width,h=b,w=!1,u=!1,E=0;r&&(n=n?n:r.A(),p=p?p:r.L());var F={Pb:function(){u||(h=a.createFramebuffer(),u=!0,E=m.uc++)},Xb:function(){F.Pb();F.j();w=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,w);a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,n,p);a.framebufferRenderbuffer(d,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,w);a.clearDepth(1)},bind:function(N,O){E!==m.w&&(a.bindFramebuffer(d,h),
      m.w=E);r&&r.j();O&&a.viewport(0,0,n,p);N&&a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)},kd:function(){E!==m.w&&(a.bindFramebuffer(d,h),m.w=E)},clear:function(){a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)},nd:function(){a.clear(a.COLOR_BUFFER_BIT)},od:function(){a.clear(a.DEPTH_BUFFER_BIT)},Zc:function(){a.viewport(0,0,n,p)},j:function(){E!==m.w&&(a.bindFramebuffer(d,h),m.w=E)},rtt:function(N){r=N;m.w!==E&&(a.bindFramebuffer(a.FRAMEBUFFER,h),m.w=E);N.j()},J:function(){a.bindFramebuffer(d,null);
      m.w=-1},resize:function(N,O){n=N;p=O;w&&(a.bindRenderbuffer(a.RENDERBUFFER,w),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,n,p))},remove:function(){a.bindFramebuffer(d,h);a.framebufferTexture2D(d,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,null,0);w&&a.framebufferRenderbuffer(d,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,null);a.bindFramebuffer(d,null);a.deleteFramebuffer(h);w&&a.deleteRenderbuffer(w);F=null}};l.xb&&F.Xb();return F},J:function(){a.bindFramebuffer(d,null);m.w=-1},ed:function(){a.bindFramebuffer(d,
    null);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);a.viewport(0,0,La.A(),La.L());m.w=-1},reset:function(){m.w=-2},T:function(){0!==m.w&&(a.bindFramebuffer(d,b),m.w=0)},clear:function(){a.viewport(0,0,La.A(),La.L());a.clear(a.COLOR_BUFFER_BIT)}}}(),Y=function(){function b(c){a.bindTexture(a.TEXTURE_2D,c)}function d(c){wa[0]=c;c=Da[0];var G=c>>16&32768,K=c>>12&2047,U=c>>23&255;return 103>U?G:142<U?G|31744|((255==U?0:1)&&c&8388607):113>U?(K|=2048,G|(K>>114-U)+(K>>113-U&1)):G=(G|U-112<<10|K>>1)+(K&
  1)}function e(c){var G=new Uint16Array(c.length);c.forEach(function(K,U){G[U]=d(K)});return G}function k(){if(null!==va.Ta)return va.Ta;var c=l(e([1,1,1,1]));return null===c?!0:va.Ta=c}function m(){if(null!==va.Ua)return va.Ua;var c=l(new Uint8Array([255,255,255,255]));return null===c?!0:va.Ua=c}function l(c){if(!Ja.Wa()||!N)return null;try{var G=a.getError(),K=ca.a({isFloat:!1,I:!0,array:c,width:1});G=a.getError();if(G!==a.NO_ERROR)return!1}catch(U){return!1}I.J();a.viewport(0,0,1,1);a.clearColor(0,
  0,0,0);a.clear(a.COLOR_BUFFER_BIT);Ja.set("s0");K.jb(0);M.g(!1,!0);c=new Uint8Array(4);a.readPixels(0,0,1,1,a.RGBA,a.UNSIGNED_BYTE,c);c=.9<c[0];K.remove();I.T();return c}var r=0,n,p=0,h,w=!1,u,E,F,N=!1,O=!1,T,H,g,B=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],C=!1,da=!1,wa=new Float32Array(1),Da=new Int32Array(wa.buffer),va={Ta:null,Ua:null},ca={l:function(){if(!N){E=[a.RGB,!1,a.RGB,a.RGBA];F=[a.RGB,!1,a.RGB,a.RGBA];n=[a.TEXTURE0,a.TEXTURE1,a.TEXTURE2,a.TEXTURE3,a.TEXTURE4,a.TEXTURE5,a.TEXTURE6,a.TEXTURE7];
    C="undefined"!==typeof JEContext;da="undefined"!==typeof La;C&&JEContext.Sd()&&n.push(a.TEXTURE8,a.TEXTURE9);h=[-1,-1,-1,-1,-1,-1,-1,-1];u=[a.UNSIGNED_BYTE,a.FLOAT,a.FLOAT];if(!w){for(var c=new Float32Array(16384),G=0;16384>G;++G)c[G]=2*Math.random()-1;w={random:ca.a({isFloat:!0,isPot:!0,array:c,width:64}),Tb:ca.a({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}N=!0}},Dc:function(){ca.fd()},Jd:function(){return w.Tb},fd:function(){u[1]=La.xa()},Tc:function(){F=E=[a.RGBA,a.RGBA,a.RGBA,
    a.RGBA]},Ud:function(c,G){t.set("s1");I.J();var K=c.A(),U=c.L();a.viewport(0,0,K,U);c.b(0);M.g(!1,!1);a.readPixels(0,0,K,U,a.RGBA,a.UNSIGNED_BYTE,G)},vc:function(c,G,K){a.activeTexture(a.TEXTURE0);r=0;var U=a.createTexture();b(U);var fa=La.u()&&a.RGBA32F?a.RGBA32F:a.FLOAT;G=G instanceof Float32Array?G:new Float32Array(G);var ea=Math.log2(G.length);ea!==Math.floor(ea)&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE));a.texParameteri(a.TEXTURE_2D,
    a.TEXTURE_MAG_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,K);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,c.A(),c.L(),0,a.RGBA,fa,G);b(null);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1);I.T();t.set("s0");c.B();a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT);b(U);M.g(!0,!1);a.deleteTexture(U)},a:function(c){function G(){b(ha);qa&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,qa);c.isPot?(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,c.Bb?a.MIRRORED_REPEAT:
    a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,c.W?a.MIRRORED_REPEAT:a.REPEAT)):(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE));c.za&&"undefined"!==typeof JESETTINGS&&a.texParameterf(a.TEXTURE_2D,JEContext.Bd().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.hd);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,c.isLinear?a.LINEAR:a.NEAREST);c.isLinear?a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,c.isMipmap&&!xa?a.NEAREST_MIPMAP_LINEAR:
    a.LINEAR):a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,c.isMipmap&&!xa?a.NEAREST_MIPMAP_NEAREST:a.NEAREST);Z=E[c.na-1];ma=F[c.na-1];ba=u[K];if(La.u()){var v=a.RGBA32F;Z===a.RGBA&&ba===a.FLOAT&&v&&(ma=v);Z===a.RGB&&ba===a.FLOAT&&v&&(ma=v,Z=a.RGBA)}if(c.I&&!c.isFloat||c.isFloat&&c.isMipmap&&Ka.Gc())(v=a.RGBA16F)&&(ma=v),ba=La.xa();c.Eb&&"undefined"!==typeof a.texStorage2D&&(Aa=c.Eb);c.Cb&&4===c.na&&(Z=JEContext.Hd());if(c.D)a.texImage2D(a.TEXTURE_2D,0,ma,Z,ba,c.D);else if(c.url)a.texImage2D(a.TEXTURE_2D,
    0,ma,Z,ba,ia);else if(aa){try{a.getError(),a.texImage2D(a.TEXTURE_2D,0,ma,x,y,0,Z,ba,aa),a.getError()!==a.NO_ERROR&&(a.texImage2D(a.TEXTURE_2D,0,ma,x,y,0,Z,ba,null),a.getError()!==a.NO_ERROR&&a.texImage2D(a.TEXTURE_2D,0,a.RGBA,x,y,0,a.RGBA,a.UNSIGNED_BYTE,null))}catch(pa){a.texImage2D(a.TEXTURE_2D,0,ma,x,y,0,Z,ba,null)}c.isKeepArray||(aa=null)}else a.texImage2D(a.TEXTURE_2D,0,ma,x,y,0,Z,ba,null);if(c.isMipmap)if(!xa&&S)S.Ra(),Ba=!0;else if(xa){v=Math.log(Math.min(x,y))/Math.log(2);var Q;ya=Array(1+
    v);ya[0]=ha;for(Q=1;Q<=v;++Q){var D=Math.pow(2,Q);var P=x/D;D=y/D;var na=a.createTexture();b(na);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texImage2D(a.TEXTURE_2D,0,ma,P,D,0,Z,ba,null);b(null);ya[Q]=na}Ba=!0}b(null);h[r]=-1;qa&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1);L=!0;oa&&S&&(oa(S),oa=!1)}"undefined"===typeof c.isFloat&&(c.isFloat=!1);"undefined"===typeof c.I&&(c.I=!1);"undefined"===typeof c.isPot&&(c.isPot=!0);
    "undefined"===typeof c.isLinear&&(c.isLinear=!1);"undefined"===typeof c.isMipmap&&(c.isMipmap=!1);"undefined"===typeof c.Ja&&(c.Ja=!1);void 0===c.za&&(c.za=!1);void 0===c.W&&(c.W=!1);void 0===c.Bb&&(c.Bb=!1);void 0===c.Cb&&(c.Cb=!1);void 0===c.na&&(c.na=4);void 0===c.zb&&(c.zb=!1);"undefined"===typeof c.isFlipY&&(c.isFlipY=c.url||c.array?!0:!1);"undefined"===typeof c.isKeepArray&&(c.isKeepArray=!1);c.data&&(c.array="string"===typeof c.data?Ia(c.data):c.isFloat?new Float32Array(c.data):new Uint8Array(c.data),
      c.isFlipY=!1);var K=0,U=c.D?!0:!1,fa=null,ea=null,ja=!1,ra=null;c.isFloat&&(c.I=!0);c.I&&(K=1);c.zb||La.u()||!c.isFloat||!da||La.lb()||(c.isFloat=!1);c.isFloat&&(K=2);c.za&&C&&!JEContext.Nd()&&(c.za=!1);var ha=a.createTexture(),oa=c.Ja,ia=null,aa=!1,x=0,y=0,L=!1,W=p++,z=!1,J,sa,X,ta,ma,Z,ba,qa=c.isFlipY,xa=c.I&&c.isMipmap&&"undefined"!==typeof Ka&&!Ka.ic()?!0:!1,ya,Aa=-1,Ba=!1;"undefined"!==typeof c.width&&c.width&&(x=c.width,y="undefined"!==typeof c.height&&c.height?c.height:x);var S={get:function(){return ha},
      A:function(){return x},L:function(){return y},Kd:function(){return c.url},Od:function(){return c.isFloat},Qd:function(){return c.I},Rd:function(){return c.isLinear},Ra:function(){a.generateMipmap(a.TEXTURE_2D)},kb:function(v,Q){xa?(v||(v=S.tb()),S.Ha(Q),b(ya[v]),h[Q]=-1):S.b(Q)},tb:function(){-1===Aa&&(Aa=Math.log(x)/Math.log(2));return Aa},rb:function(v){if(xa){v||(v=S.tb());t.set("s11");S.Ha(0);var Q,D=x,P=y;for(Q=1;Q<=v;++Q)D/=2,P/=2,t.P("u7",.25/D,.25/P),a.viewport(0,0,D,P),b(ya[Q-1]),a.framebufferTexture2D(I.ca(),
        a.COLOR_ATTACHMENT0,a.TEXTURE_2D,ya[Q],0),M.g(!1,1===Q);h[0]=-1}else S.Ra()},Ha:function(v){v!==r&&(a.activeTexture(n[v]),r=v)},b:function(v){if(!L)return!1;S.Ha(v);if(h[v]===W)return!1;b(ha);h[v]=W;return!0},jb:function(v){a.activeTexture(n[v]);r=v;b(ha);h[v]=W},j:function(){a.framebufferTexture2D(I.ca(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,ha,0)},B:function(){a.viewport(0,0,x,y);a.framebufferTexture2D(I.ca(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,ha,0)},ee:function(){a.framebufferTexture2D(I.ca(),a.COLOR_ATTACHMENT0,
        a.TEXTURE_2D,null,0)},resize:function(v,Q){x=v;y=Q;G()},clone:function(v){v=ca.a({width:x,height:y,I:c.I,isFloat:c.isFloat,isLinear:c.isLinear,W:c.W,isFlipY:v?!qa:qa,isPot:c.isPot});Ja.set("s0");I.T();v.j();a.viewport(0,0,x,y);S.b(0);M.g(!0,!0);return v},Zc:function(){a.viewport(0,0,x,y)},remove:function(){a.deleteTexture(ha);S=null},refresh:function(){S.jb(0);qa&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!0);U?a.texImage2D(a.TEXTURE_2D,0,ma,Z,a.UNSIGNED_BYTE,c.D):a.texImage2D(a.TEXTURE_2D,0,ma,x,y,0,Z,
        ba,aa);qa&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},mb:function(){var v=x*y*4;sa=[new Uint8Array(v),new Uint8Array(v),new Uint8Array(v),new Uint8Array(v)];J=[new Float32Array(sa[0].buffer),new Float32Array(sa[1].buffer),new Float32Array(sa[2].buffer),new Float32Array(sa[3].buffer)];X=new Uint8Array(4*v);ta=new Float32Array(X.buffer);z=!0},Ob:function(){z||S.mb();a.readPixels(0,0,x,4*y,a.RGBA,a.UNSIGNED_BYTE,X);var v,Q=x*y,D=2*Q,P=3*Q;for(v=0;v<Q;++v)J[0][v]=ta[v],J[1][v]=ta[v+Q],J[2][v]=ta[v+D],J[3][v]=
        ta[v+P];return J},nb:function(){I.J();t.set("s12");S.b(0);for(var v=0;4>v;++v)a.viewport(0,y*v,x,y),t.Rb("u8",B[v]),M.g(!1,0===v)},fe:function(v){var Q=ba===u[0]&&!m();b(ha);qa&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,qa);Q?(ja||(fa=document.createElement("canvas"),fa.width=x,fa.height=y,ea=fa.getContext("2d"),ra=ea.createImageData(x,y),ja=!0),ra.data.set(v),ea.putImageData(ra,0,0),a.texImage2D(a.TEXTURE_2D,0,ma,Z,ba,fa)):a.texImage2D(a.TEXTURE_2D,0,ma,x,y,0,Z,ba,v);h[r]=W;qa&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,
        !1)},ge:function(v,Q){b(ha);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,Q);a.texImage2D(a.TEXTURE_2D,0,ma,Z,ba,v);h[r]=W;Q&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},Wd:function(v,Q){var D=x*y,P=4*D;v=c.I?v?"RGBE":"JSON":"RGBA";Q&&(v=Q);Q=La.u()&&!1;switch(v){case "RGBE":var na="s41";break;case "JSON":na=Q?"s0":"s12";break;case "RGBA":case "RGBAARRAY":na="s6"}z||("RGBA"===v||"RGBE"===v||"RGBAARRAY"===v?(sa=new Uint8Array(P),z=!0):"JSON"!==v||Q||S.mb());I.J();t.set(na);S.b(0);if("RGBA"===v||"RGBE"===v||"RGBAARRAY"===
        v){a.viewport(0,0,x,y);M.g(!0,!0);a.readPixels(0,0,x,y,a.RGBA,a.UNSIGNED_BYTE,sa);if("RGBAARRAY"===v)return{data:sa};O||(T=document.createElement("canvas"),H=T.getContext("2d"),O=!0);T.width=x;T.height=y;g=H.createImageData(x,y);g.data.set(sa);H.putImageData(g,0,0);var pa=T.toDataURL("image/png")}else if("JSON"===v)if(Q)pa=new Float32Array(D),a.viewport(0,0,x,y),M.g(!0,!0),a.readPixels(0,0,x,y,a.RGBA,a.FLOAT,pa);else{for(pa=0;4>pa;++pa)a.viewport(0,y*pa,x,y),t.Rb("u8",B[pa]),M.g(!pa,!pa);S.Ob();pa=
        Array(D);for(na=0;na<D;++na)pa[4*na]=J[0][na],pa[4*na+1]=J[1][na],pa[4*na+2]=J[2][na],pa[4*na+3]=J[3][na]}return{format:v,data:pa,width:x,height:y,isMirrorY:c.W,isFlipY:"RGBA"===v?c.isFlipY:!c.isFlipY}}};c.isMipmap&&!xa&&L&&!Ba&&(S.Ra(),Ba=!0);if(c.url)b(ha),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,null),ia=new Image,ia.qd="Anonymous",ia.crossOrigin="Anonymous",ia.src=c.url,ia.onload=function(){x=ia.width;y=ia.height;G()};else if(c.D){var Ea=function(){x=void 0!==c.D.videoWidth?
      c.D.videoWidth:c.D.width;y=void 0!==c.D.videoHeight?c.D.videoHeight:c.D.height;x?G():setTimeout(Ea,1)};Ea()}else c.array?(c.I&&!c.isFloat?c.array instanceof Uint16Array?(aa=c.array,G()):k()?(aa=e(c.array),G()):(G(),ca.vc(S,c.array,qa)):(aa=c.isFloat?c.array instanceof Float32Array?c.array:new Float32Array(c.array):c.array instanceof Uint8Array?c.array:new Uint8Array(c.array),G()),c.isKeepArray||(aa&&aa!==c.array&&(aa=null),delete c.array)):G();S.Ac=S.A;oa&&L&&(oa(S),oa=!1);return S},J:function(c){c!==
  r&&(a.activeTexture(n[c]),r=c);h[c]=-1;b(null)},ld:function(c){w.random.b(c)},reset:function(){for(var c=0;c<n.length;++c)h[c]=-1;r=-1},Vd:function(){r=-1},ce:function(){for(var c=0;c<n.length;++c)ca.J(c)},wc:function(){w&&(w.random.remove(),w.Tb.remove())},de:function(c,G){if("RGBA"===c.format||"RGBE"===c.format){var K=new Image;K.src=c.data;K.onload=function(){ca.a({W:c.isMirrorY,isFlipY:c.isFlipY,isFloat:!1,D:K,Ja:function(U){if("RGBA"===c.format)G(U);else{var fa=c.width,ea=c.height,ja=ca.a({W:c.isMirrorY,
      isFloat:!0,width:fa,height:ea,isFlipY:c.isFlipY});I.T();a.viewport(0,0,fa,ea);t.set("s42");ja.j();U.b(0);M.g(!0,!0);ca.J(0);G(ja);a.flush();setTimeout(U.remove,50)}}})}}else"JSON"===c.format?G(ca.a({isFloat:!0,isFlipY:c.isFlipY,width:c.width,height:c.height,array:new Float32Array(c.data)})):G(!1)}};return ca}(),Na={a:function(b){var d=[Y.a(b),Y.a(b)],e=[d[1],d[0]],k=e,m={Wc:function(l){k[1].j();k[0].b(l);m.Sb()},Xd:function(l){k[1].B();k[0].b(l);m.Sb()},Sb:function(){k=k===d?e:d},refresh:function(){k[0].refresh();
      k[1].refresh()},b:function(l){k[0].b(l)},Dd:function(){return k[0]}};return m}},La=function(){function b(){d="undefined"===typeof Ma?JEContext:Ma;e=!0}var d,e=!1,k=!1,m=!1,l=!1,r=!1,n=!1,p=!1,h=!1,w=!1,u=!1,E=!1,F=!0,N=!0,O=!0,T=!1,H="undefined"===typeof window?{}:window,g={l:function(){if(e)return!0;b();g.pb();g.Qa();g.qc();g.rc();I.l();Y.l();if(!g.mc())return!1;M.l();Y.Dc();return!0},A:function(){e||b();return d.A()},L:function(){e||b();return d.L()},u:function(){e||b();return d.u()},qc:function(){E=
    (u=a.getExtension("EXT_color_buffer_float")||a.getExtension("WEBGL_color_buffer_float")||a.getExtension("OES_color_buffer_float"))?!0:!1;H.GL_EXT_COLORBUFFERFLOAT=u},rc:function(){a.getExtension("EXT_color_buffer_half_float")||a.getExtension("WEBGL_color_buffer_half_float")||a.getExtension("OES_color_buffer_half_float")},pb:function(){if(!k){this.u()||(m=a.getExtension("OES_texture_float")||a.getExtension("MOZ_OES_texture_float")||a.getExtension("WEBKIT_OES_texture_float"),r=(H.GL_EXT_FLOAT=m)?!0:
    !1);if(r||this.u())l=a.getExtension("OES_texture_float_linear")||a.getExtension("MOZ_OES_texture_float_linear")||a.getExtension("WEBKIT_OES_texture_float_linear"),H.GL_EXT_FLOATLINEAR=l;k=!0}},Qa:function(){if(!w){if(!this.u()){if(n=a.getExtension("OES_texture_half_float")||a.getExtension("MOZ_OES_texture_half_float")||a.getExtension("WEBKIT_OES_texture_half_float"))T=n.HALF_FLOAT_OES,p=!0;!T&&a.HALF_FLOAT&&(T=a.HALF_FLOAT);!T&&a.FLOAT&&(T=a.FLOAT);H.GL_EXT_HALFFLOAT=n}if(p||this.u())h=a.getExtension("OES_texture_half_float_linear")||
    a.getExtension("MOZ_OES_texture_half_float_linear")||a.getExtension("WEBKIT_OES_texture_half_float_linear"),H.GL_EXT_HALFFLOATLINEAR=h;w=!0}},xa:function(){if(g.u())return a.HALF_FLOAT;g.Qa();return p?T:a.FLOAT},lb:function(){return F},hc:function(){return N},md:function(){return O},gc:function(){return E},oc:function(){N=F=!0;var B=a.createFramebuffer();a.bindFramebuffer(a.FRAMEBUFFER,B);var C=a.createTexture();a.bindTexture(a.TEXTURE_2D,C);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);
    a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texImage2D(a.TEXTURE_2D,0,g.u()&&a.RGBA32F?a.RGBA32F:a.RGBA,1,1,0,a.RGBA,a.FLOAT,null);a.framebufferTexture2D(I.ca(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,C,0);var da=a.checkFramebufferStatus(I.Sa());da!==a.FRAMEBUFFER_COMPLETE&&(F=!1);a.texImage2D(a.TEXTURE_2D,0,g.u()&&a.RGBA16F?a.RGBA16F:a.RGBA,1,1,0,a.RGBA,g.xa(),null);a.framebufferTexture2D(I.ca(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,C,0);da=a.checkFramebufferStatus(I.Sa());da!==a.FRAMEBUFFER_COMPLETE&&
    (N=!1);a.bindTexture(a.TEXTURE_2D,null);a.bindFramebuffer(a.FRAMEBUFFER,null);a.deleteTexture(C);a.deleteFramebuffer(B)},nc:function(){var B=I.a({width:1});B.Pb();var C=Y.a({width:1,isFloat:!0,na:3});B.j();C.j();a.flush();a.checkFramebufferStatus(I.Sa())!==a.FRAMEBUFFER_COMPLETE?(Y.Tc(),O=!1):O=!0;B.remove();C.remove()},mc:function(){g.oc();if(!F&&!N)return!1;g.nc();return!0}};return g}(),Ka=function(){function b(F,N,O,T){a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,T?a.NEAREST_MIPMAP_NEAREST:
  a.LINEAR);try{var H=a.getError();H!==a.NO_ERROR&&console.log("GLERR in test_mipmapping() :",H);a.texImage2D(a.TEXTURE_2D,0,F,2,2,0,a.RGBA,N,O);H=a.getError();if(H!==a.NO_ERROR)return!1}catch(g){return!1}T&&a.generateMipmap(a.TEXTURE_2D);M.ha();M.g(!1,!0);a.readPixels(0,0,1,1,a.RGBA,a.UNSIGNED_BYTE,n);H=a.getError();H===a.INVALID_OPERATION&&"undefined"!==typeof a.PIXEL_PACK_BUFFER&&(a.bindBuffer(a.PIXEL_PACK_BUFFER,null),a.readPixels(0,0,1,1,a.RGBA,a.UNSIGNED_BYTE,n),H=a.getError());return H!==a.NO_ERROR?
  !1:0!==n[0]}function d(F){return La.lb()&&b(internalPixelFormat32f,a.FLOAT,new Float32Array(h),F)?(l=m.gb,!0):!1}function e(F){return La.hc()?b(u,La.xa(),new Uint16Array(h),F)||b(u,a.FLOAT,new Float32Array(h),F)?(l=m.Ga,!0):!1:!1}var k=!1,m={gb:3,Ga:2,RGBA8:0},l=m.RGBA8,r,n=new Uint8Array(4),p=[.8,1,.8,1],h=p.concat(p,p,p),w=!0,u,E={l:function(){La.pb();La.Qa();u=a.RGBA;if(Ma.u()){var F=a.RGBA16F;F&&(u=F)}M.l();I.reset();I.J();a.viewport(0,0,1,1);t.set("s0");k=!0;r=a.createTexture();a.activeTexture(a.TEXTURE0);
    a.bindTexture(a.TEXTURE_2D,r);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);if(e(!0)||d(!0))return!0;w=!1;if(e(!1)||d(!1))return!0;if(Ma.u()){u=a.RGBA;if(e(!0)||d(!0))return!0;w=!1;if(e(!1)||d(!1))return!0}return!1},ic:function(){return w},Ed:function(){return l},Pd:function(){k||E.l();return l===m.gb},Gc:function(){k||E.l();return l===m.Ga}};return E}(),Oa={a:function(b){var d=
    Y.a(b.alpha),e=Y.a(b.beta);return{pc:function(){d.b(1);e.b(2)}}}},Ra={a:function(b){var d=b.ad;d.index=b.index;d.X=b.X;d.parent=b.parent;switch(d.type){case "input":b=Pa.a(d);break;default:b=Qa.a(d)}return b}},Pa={a:function(b){"undefined"===typeof b.sift&&(b.sift=!1);"undefined"===typeof b.DWT&&(b.DWT=!1);"undefined"===typeof b.blur&&(b.blur=!1);"undefined"===typeof b.siftOutWidth&&(b.siftOutWidth=!1);"undefined"===typeof b.density&&(b.density=1);var d=!1;if(b.mask){d=!0;SETTINGS&&void 0!==SETTINGS.cc&&
  (b.mask=SETTINGS.cc+b.mask);var e=Y.a({isFloat:!1,url:b.mask})}var k=!1,m="undefined"!==typeof b.preprocessing?b.preprocessing:!1,l=!1,r=!1;b.sift?Sift.l({Cc:a,ja:!1,width:b.size,Td:b.siftOutWidth}):b.DWT&&DWT.l({Cc:a,ja:!1,width:b.size});var n=!1;b.customInputShader&&(n="s43",t.hb({name:"_",id:n,c:b.customInputShader,f:["uSource"],precision:"lowp"}),t.H(n,[{type:"1i",name:"_",value:0}]));switch(m){case "sobel":var p="s32";l=!0;break;case "meanNormalization":p="s33";l=!0;break;case "grayScale":p=
    "s29";l=!1;break;case "grayScaleTilt":p="s30";r=!0;l=!1;break;case "rgbGrayTilt":p="s31";r=!0;l=!1;break;case "copy":p=n?n:"s0";break;case "inputLightRegulation":p=n?n:"s29";Sa.l({width:b.size,Gb:b.nBlurPass,Fc:!1});k=!0;break;case "direct":case "none":p=!1;break;default:p="s3"}r&&t.H(p,[{name:"u28",type:"1f",value:b.tilt}]);d&&(p+="Mask");if(b.blur)var h=Y.a({isFloat:!1,isPot:!1,width:b.size});var w=Y.a({isFloat:!1,isPot:!1,width:b.size}),u={A:function(){return b.sift?Sift.ma():b.size},ma:function(){return u.A()},
    zc:function(){return b.sift?Sift.ya():b.DWT?DWT.ya():k?Sa.ya():w},F:function(){I.T();b.blur&&(h.B(),t.set("s44"),t.P("u7",1/b.size,1/b.size),M.g(!1,!0),h.b(0));p&&(t.set(p),l&&t.v("u29",1/b.size),w.B(),d&&e.b(1),M.g(!1,!1),w.b(0),k?Sa.Za(w):b.sift?(t.Z(),Sift.Za()):b.DWT&&(t.Z(),DWT.Za(4)))}};return u}},Qa={a:function(b){"undefined"===typeof b.disableNormalize&&(b.disableNormalize=!1);var d=[],e=[],k,m,l=!1,r,n=!0,p,h,w=b.isReorganize?b.isReorganize:!1,u=b.kernelsNumber?!0:!1,E=b.dynPelu?Oa.a(b.dynPelu):
    !1,F=E?!0:!1,N={isEnabled:!1},O;if("softmax"===b.type){b.activation="softmax";b.size=Math.pow(2,Math.ceil(Math.log2(Math.sqrt(b.num_classes))));b.sparsity="undefined"!==typeof b.sparsity?b.sparsity:b.X.ma();b.gain="undefined"!==typeof b.gain?b.gain:1;t.H("s20",[{type:"1f",name:"u10",value:b.gain}]);var T=Y.a({isFloat:!0,isPot:!1,width:b.size}),H=Y.a({isFloat:!0,isPot:!1,width:b.size,isMipmap:!0});n=!1;var g=new Uint8Array(Math.pow(4*b.size,2)),B;for(B=0;B<b.size*b.size;++B){var C=B<b.num_classes?
    255:0;g[4*B]=C;g[4*B+1]=C;g[4*B+2]=C;g[4*B+3]=C}var da=Y.a({isFloat:!1,isPot:!1,width:b.size,array:g})}else b.cost?(b.sparsity="undefined"!==typeof b.sparsity?b.sparsity:b.X.ma(),n=!1):"full"===b.connectivityUp&&(b.sparsity=b.X.ma());var wa={elu:"s15",elu01:"s16",relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",softmax:"s20",dynPelu:"s17"}[b.activation],Da=b.sparsity*b.sparsity,va=!1,ca=b.size;if(b.maxPooling){switch(b.maxPooling.size){case 2:var c="s34";break;case 4:c="s35"}va=!0;ca/=
    b.maxPooling.size;var G=Y.a({isFloat:!0,isPot:!1,width:ca})}var K=void 0!==b.Mc&&b.Mc?!0:!1,U=null,fa=null,ea=null;K&&(U="s45"+b.index.toString(),t.wb("s45",U,[((b.normalization.n-1)/2).toFixed(1)]),t.H(U,[{type:"1i",name:"u1",value:0},{type:"2f",name:"u7",value:[1/b.size,1/b.size]},{type:"1f",name:"u6",value:b.normalization.alpha},{type:"1f",name:"u9",value:b.normalization.beta},{type:"1f",name:"u33",value:b.normalization.k}]),fa=Y.a({isFloat:!0,isPot:!0,width:b.size}),ea=Y.a({isFloat:!0,isPot:!0,
    width:b.size}));var ja,ra,ha,oa;n&&(oa=Y.a({isFloat:!0,isPot:!1,width:b.size}));var ia=Y.a(b.bias),aa,x={A:function(){return b.size},ma:function(){return ca},ub:function(){return b.num_classes},ec:function(y){O.b(y)},Pc:function(){b.remap&&b.remap.isEnabled&&(N={isEnabled:!0,Ic:Y.a({isFloat:!1,isFlipY:!1,array:new Uint8Array(b.remap.maskTexture.data),width:b.remap.maskTexture.width,isPot:!1}),layers:b.remap.layers.map(function(y){return b.parent.yc(y)}),depth:b.remap.depth})},Vc:function(){switch(b.connectivityUp){case "gaussian":aa=
      Ta.a(b.connectivity);break;case "direct":aa=Ua.a(b.connectivity);break;case "square":aa=Va.a(b.connectivity);break;case "squareFast":aa=Wa.a(b.connectivity,b.activation);break;case "full":aa=Xa.a(b.connectivity);break;case "conv":h=b.kernelsNumber,aa=Ya.a(b.connectivity),w&&(p=Y.a({width:ca,isFloat:!0,isFlipY:!1,isPot:!1}))}if(aa.Y){var y=b.size*b.sparsity;ra=Math.log(y/b.size)/Math.log(2);ja=Y.a({isMipmap:!0,isFloat:!0,isPot:!0,width:y,Eb:ra});ha=Y.a({isFloat:!0,isPot:!0,width:b.size})}},F:function(y,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               L){O=y;aa.Y?(ja.B(),u&&ia.b(2),aa.F(N),ja.b(0),ja.rb(ra),ha.B(),u?t.set("s0"):(t.set("s28"),t.v("u27",Da),ia.b(1)),ja.kb(ra,0),M.g(!1,!1),t.set(wa),K?fa.j():oa.j(),ha.b(0),F&&E.pc(),M.g(!1,!1)):(oa.B(),ia.b(1),aa.F());K&&(t.set(U),ea.j(),fa.b(0),M.g(!1,!1),t.set("s46"),t.v("u6",1),oa.j(),ea.b(1),M.g(!1,!1));if(n)return va?(G.B(),oa.b(0),t.set(c),t.P("u7",1/b.size,1/b.size),M.g(!1,!1),L=G):L=oa,L.b(0),w&&(p.j(),t.set("s22"),t.P("u14",h,ca/h),M.g(!1,!1),L=p,p.b(0)),L;if("softmax"===b.type){t.set("s20");
      oa.b(0);T.j();M.g(!1,!1);b.disableNormalize?y=T:(t.set("s2"),T.b(0),da.b(1),H.j(),M.g(!1,!1),t.set("s0"),m.B(),H.b(0),H.rb(!1),M.g(!1,!1),t.set("s21"),k.B(),H.kb(!1,0),t.v("u12",oa.Ac()),m.b(1),M.g(!1,!1),y=k);if(L){switch(l){case "cpuRGBAAvg":break;default:var W=x.Nb(y)}return W}return!1}if(b.cost){t.set("gpuRawAvg"===l?"s8":"s7");L=oa;b.disableNormalize||(t.v("u4",1/b.size),k.B(),oa.b(0),M.g(!1,!1),L=k);switch(l){case "cpuRGBA2Float":L.nb();W=x.Nb(L);r(W);break;case "gpuRawAvg":case "gpuRaw":L.b(0),
      r(L)}return!1}},kc:function(y){y&&"undefined"!==typeof y.Lb&&(l=y.Lb,r=y.Oc);oa=Y.a({isFloat:!0,isPot:!0,isMipmap:"softmax"===b.type,width:b.size});"softmax"===b.type&&(m=Y.a({isFloat:!0,isPot:!0,width:1}));var L=0,W=0,z="undefined"!==typeof b.num_classes&&b.num_classes?b.num_classes:b.size*b.size;for(y=0;y<z;++y)d.push(L+(b.size-1-W)*b.size),e.push([-1,-1,-1,-1]),++L,L===b.size&&(L=0,++W);b.disableNormalize||(k=Y.a({isFloat:!0,isPot:!0,width:b.size}))},Nb:function(y){y.nb();var L=y.Ob();d.forEach(function(W,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      z){e[z][0]=L[0][W];e[z][1]=L[1][W];e[z][2]=L[2][W];e[z][3]=L[3][W]});return e}};b.X&&x.Vc(b.X);return x}};
function Za(){var b={Md:!1},d,e,k;b||(b={});this.yc=function(m){return d[m]};this.Sc=function(m){var l=!1;d=m.map(function(r,n){return l=r=Ra.a({index:n,parent:this,ad:r,X:l})});e=d[0];k=d[d.length-1];d.forEach(function(r,n){0!==n&&r.Pc()})};this.F=function(m,l){var r=l;d.forEach(function(n){r=n.F(r,m)});return r};this.sb=function(){return e.A()};this.ya=function(){return k.zc()};this.Uc=function(m){k.kc(m)};this.ub=function(){return k.ub()}}
var Ua={a:function(b){var d=Y.a(b.weights);delete b.weights.data;return{Y:!0,la:function(){return 1},Bc:function(){return d},F:function(){t.set("s27");d.b(1);M.g(!1,!1)}}}},Xa={a:function(b){var d=b.fromLayerSize,e=Y.a(b.weights);return{Y:!0,la:function(){return d},F:function(k){if(k.isEnabled){t.set("s25");k.Ic.b(3);var m,l=Math.min(k.layers.length,k.depth);for(m=0;m<l;++m)k.layers[m].ec(4+m)}else t.set("s24");t.v("u18",b.toLayerSize);e.b(1);M.g(!1,!1)}}}},Ta={a:function(b){var d=b.toSparsity*b.toLayerSize,
    e=d/b.fromLayerSize,k=Y.a(b.weights);Y.a({width:d,isFloat:!0,array:new Float32Array(b.fromBindings),isPot:!0});var m=Y.a({width:d,isFloat:!0,array:new Float32Array(b.toBindings),isPot:!0});return{Y:!0,la:function(){return e},F:function(){t.set("s23");k.b(1);m.b(2);M.g(!1,!0)}}}},Va={a:function(b){var d=b.fromLayerSize,e=b.toLayerSize,k=b.toSparsity,m=k*e,l=m/d,r=d/e,n,p,h,w,u=0,E=0,F=0,N=Array(k*e*k*e*4),O=Array(k*e*k*e*4),T=Array(d*d);for(n=0;n<T.length;++n)T[n]=0;var H=Math.floor(k/2),g=.5/e,B=
    .5/d,C=.5/m;for(n=0;n<e;++n)for(p=0;p<e;++p){var da=Math.round(n*r);var wa=Math.round(p*r);var Da=n/e;var va=p/e;Da+=g;va+=g;for(h=0;h<k;++h)for(w=0;w<k;++w){var ca=u/m;var c=E/m;var G=da+h-H;var K=wa+w-H;0>G&&(G+=d);0>K&&(K+=d);G>=d&&(G-=d);K>=d&&(K-=d);var U=G/d;var fa=K/d;c=1-c-1/m;U+=B;fa+=B;ca+=C;c+=C;var ea=n*k+h,ja=p*k+w;ja=e*k-ja-1;ea=ja*e*k+ea;N[4*ea]=ca;N[4*ea+1]=c;N[4*ea+2]=U;N[4*ea+3]=fa;U=T[K*d+G]++;fa=U%l;G=G*l+fa;K=K*l+(U-fa)/l;K=d*l-1-K;K=K*d*l+G;O[4*K]=ca;O[4*K+1]=c;O[4*K+2]=Da;O[4*
  K+3]=va;++u>=m&&(u=0,++E);++F}}var ra=Y.a(b.weights);Y.a({width:m,isFloat:!0,array:new Float32Array(O),isPot:!0});O=null;var ha=Y.a({width:m,isFloat:!0,array:new Float32Array(N),isPot:!0});N=null;return{Y:!0,la:function(){return l},F:function(){t.set("s23");ra.b(1);ha.b(2);M.g(!1,!1)}}}},Ya={a:function(b){var d=b.kernelsNumber,e=b.toSparsity,k=e*b.toLayerSize/b.fromLayerSize,m=Y.a(b.weights);return{Y:!0,la:function(){return k},Id:function(){return e},Bc:function(){return m},F:function(){t.set("s26");
      t.v("u24",d);t.v("u25",e);t.v("u18",b.toLayerSize);t.v("u26",b.fromLayerSize);m.b(1);M.g(!1,!1)}}}},Wa={a:function(b,d){var e=b.fromLayerSize,k=b.toLayerSize,m=b.toSparsity,l=b.stride?b.stride:1,r=m*k/e,n=k<e,p=e/k,h=Y.a(b.weights),w="s47"+[e.toString(),k.toString(),m.toString(),l.toString(),d].join("_");t.sc(w)||(b=Fa(d),k=[{type:"1f",name:"u18",value:k},{type:"1f",name:"u32",value:l}],n&&k.push({type:"1f",name:"u26",value:e}),e=[(n?r:m).toFixed(1),b],n&&e.push(p.toFixed(1)),t.wb(n?"s40":"s39",w,
    e),t.H(w,k.concat([{type:"1i",name:"u16",value:0},{type:"1i",name:"u23",value:1},{type:"1i",name:"u15",value:3}])));return{Y:!1,la:function(){return r},F:function(){t.set(w);h.b(3);M.g(!1,!1)}}}},Sa=function(){var b,d,e,k,m,l,r,n,p;return{l:function(h){b=h.Gb?h.Gb:3;d=h.width?h.width:64;k=h.Fc?!0:!1;h={isFloat:!1,width:d,isPot:!1,isFlipY:!1};m=Y.a(h);l=Y.a(h);r=Y.a(h);n=Y.a(h);p=Y.a({isFloat:!0,width:d,isPot:!1,isFlipY:!1});e=1/d},Za:function(h){t.set("s37");for(var w=0;w<b;++w)m.j(),t.P("u7",e,0),
    M.g(k,!1),l.j(),m.b(0),t.P("u7",0,e),M.g(k,!1),l.b(0);t.set("s36");n.j();h.b(0);M.g(k);t.set("s37");for(w=0;w<b;++w)r.j(),n.b(0),t.P("u7",e,0),M.g(k,!1),n.j(),r.b(0),t.P("u7",0,e),M.g(k,!1);t.set("s38");p.j();h.b(0);l.b(1);n.b(2);M.g(k,!1);p.b(0)},ya:function(){return p}}}();function $a(b,d){b[d]=!0;b.setAttribute(d,"true")}function ab(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}
function bb(){var b=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3]||0,10)]}function cb(){var b=navigator.userAgent.toLowerCase();return-1!==b.indexOf("safari")&&-1===b.indexOf("chrome")?!0:!1}function db(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1}
function eb(b){if(!b)return b;var d=!1;if(b.video){var e=function(k){var m={};"undefined"!==typeof k.min&&(m.min=k.min);"undefined"!==typeof k.max&&(m.max=k.max);"undefined"!==typeof k.ideal&&(m.ideal=k.ideal);return m};d={};"undefined"!==typeof b.video.width&&(d.width=e(b.video.width));"undefined"!==typeof b.video.height&&(d.height=e(b.video.height));"undefined"!==typeof b.video.facingMode&&(d.facingMode=b.video.facingMode)}d={audio:b.audio,video:d};"undefined"!==typeof b.deviceId&&(d.deviceId=b.deviceId);
  return d}function fb(b){var d=b.video.width;b.video.width=b.video.height;b.video.height=d;return b}
function gb(b){function d(u){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(E,F){return Math.abs(E-u)-Math.abs(F-u)})}function e(u){var E=eb(b);k.push(u(E))}var k=[];if(!b||!b.video)return k;if(b.video.width&&b.video.height){if(b.video.width.ideal&&b.video.height.ideal){var m=d(b.video.width.ideal).slice(0,3),l=d(b.video.height.ideal).slice(0,3),r={},n=0;for(r.S=void 0;n<m.length;r={S:r.S},++n){r.S=m[n];var p={},h=0;for(p.R=void 0;h<l.length;p={R:p.R},++h)if(p.R=l[h],
r.S!==b.video.width.ideal||p.R!==b.video.height.ideal){var w=Math.max(r.S,p.R)/Math.min(r.S,p.R);w<4/3-.1||w>16/9+.1||e(function(u,E){return function(F){F.video.width.ideal=u.S;F.video.height.ideal=E.R;return F}}(r,p))}}}e(function(u){return fb(u)})}b.video.width&&b.video.height&&(b.video.width.ideal&&b.video.height.ideal&&e(function(u){delete u.video.width.ideal;delete u.video.height.ideal;return u}),e(function(u){delete u.video.width;delete u.video.height;return u}));b.video.facingMode&&(e(function(u){delete u.video.facingMode;
  return u}),b.video.width&&b.video.height&&e(function(u){fb(u);delete u.video.facingMode;return u}));k.push({audio:b.audio,video:!0});return k}function hb(b){try{var d=window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(k){d=window.innerHeight>window.innerWidth}if(d&&b&&b.video){d=b.video.width;var e=b.video.height;d&&e&&d.ideal&&e.ideal&&d.ideal>e.ideal&&(b.video.height=d,b.video.width=e)}}
function ib(b){b.volume=0;$a(b,"muted");if(cb()){if(1===b.volume){var d=function(){b.volume=0;window.removeEventListener("mousemove",d,!1);window.removeEventListener("touchstart",d,!1)};window.addEventListener("mousemove",d,!1);window.addEventListener("touchstart",d,!1)}setTimeout(function(){b.volume=0;$a(b,"muted")},5)}}
function jb(b,d,e,k){function m(r){l||(l=!0,e(r))}var l=!1;navigator.mediaDevices.getUserMedia(k).then(function(r){function n(){setTimeout(function(){if(b.currentTime){var p=b.videoWidth,h=b.videoHeight;if(0===p||0===h)m("VIDEO_NULLSIZE");else{p&&(b.style.width=p.toString()+"px");h&&(b.style.height=h.toString()+"px");p={jc:null,$c:null,Jc:null};try{var w=r.getVideoTracks()[0];w&&(p.Jc=w,p.jc=w.getCapabilities(),p.$c=w.getSettings())}catch(u){}cb()||ab()?b.parentNode&&null!==b.parentNode?(l||d(b,r,
  p),setTimeout(function(){b.play()},100)):(document.body.appendChild(b),ib(b),l||d(b,r,p),setTimeout(function(){b.style.transform="scale(0.0001,0.0001)";b.style.position="fixed";b.style.bottom="0px";b.style.right="0px";ib(b);setTimeout(function(){b.play()},100)},80)):l||d(b,r,p)}}else m("VIDEO_NOTSTARTED")},700)}"undefined"!==typeof b.srcObject?b.srcObject=r:(b.src=window.URL.createObjectURL(r),b.videoStream=r);ib(b);b.addEventListener("loadeddata",function(){var p=b.play();ib(b);"undefined"===typeof p?
  n():p.then(function(){n()}).catch(function(){m("VIDEO_PLAYPROMISEREJECTED")})},!1)}).catch(function(r){m(r)})}
function kb(b,d,e){var k=db()?document.createElement("video"):!1;if(k)if(db()){if(e&&e.video){if(ab()){var m=bb();(12>m[0]||12===m[0]&&2>m[1])&&hb(e)}e.video.width&&e.video.width.ideal&&(k.style.width=e.video.width.ideal+"px");e.video.height&&e.video.height.ideal&&(k.style.height=e.video.height.ideal+"px")}$a(k,"autoplay");$a(k,"playsinline");e&&e.audio?k.volume=0:$a(k,"muted");jb(k,b,function(){function l(n){if(0===n.length)d("INVALID_FALLBACKCONSTRAINTS");else{var p=n.shift();jb(k,b,function(){l(n)},
  p)}}var r=gb(e);l(r)},e)}else d&&d("MEDIASTREAMAPI_NOTFOUND");else d&&d("VIDEO_NOTPROVIDED")}function lb(b){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return b(!1,"NOTSUPPORTED"),!1;navigator.mediaDevices.enumerateDevices().then(function(d){(d=d.filter(function(e){return e.kind&&-1!==e.kind.toLowerCase().indexOf("video")&&e.label&&e.deviceId}))&&d.length&&0<d.length?b(d,!1):b(!1,"NODEVICESFOUND")}).catch(function(){b(!1,"PROMISEREJECTED")})}
window.JEEFACEFILTERAPI=function(){var b,d,e,k,m,l,r,n,p,h,w,u,E,F;function N(){return-1!==[L.play,L.pause].indexOf(W)}function O(f){if(W!==L.pause){var q=W===L.play?J.ta:x.bc;Ea=setTimeout(B.bind(null,f),q)}}function T(){if(W===L.play)return!1;W=L.play;P.timestamp=Date.now();v&&window.cancelAnimationFrame(v);B(0)}function H(f,q,A,V,R){f=4*(3*q+f)+A;return V+(Aa[f]/255+Aa[f+12]/65025)*(R-V)}function g(){I.T();M.reset();Y.reset();t.Z();t.ob();a.disable(a.DEPTH_TEST);a.disable(a.BLEND);M.ha();t.pa()}
  function B(){if(W!==L.pause){t.ob();M.reset();M.ha();a.disable(a.DEPTH_TEST);I.T();t.pa();if(!z.Va){var f=z.element.currentTime-z.Da;0>f&&(z.Da=z.element.currentTime);1E3*f<x.gd||(z.qa.refresh(),z.Da+=f,t.set("s50"),z.ra.B(),z.qa.b(0),M.g(!1,!1))}if(D.K.length>P.G)D.K.splice(0,D.K.length-P.G);else for(;D.K.length<P.G;)D.K.push(0);if(1!==D.i)if(S.every(c)){for(var q=0,A=f=0;A<S.length;++A)S[A].detected>q&&(q=S[A].detected,f=0);for(q=0;q<P.G;++q)D.K[q]=f}else{q=0;f=!1;for(A=D.Db;q<P.G;++q){if(c(S[A]))if(f){do++A===
  D.i&&(A=0);while(c(S[A]))}else f=!0;D.K[q]=A++;A>=D.i&&(A=0)}D.Db=A}for(f=0;f<P.G;++f)D.U=D.K[f],D.Ya=(.5+D.U)/D.i,D.Ab=D.K.lastIndexOf(D.U)===f,t.set("s51"),J.ba&&t.v("u38",S[D.U].rz),1!==D.i&&t.v("u37",D.Ya),xa.B(),z.ra.b(0),ya.b(1),M.g(!1,!1),xa.b(0),sa.F(!1,xa);f=Date.now();P.ka=f-P.timestamp;P.timestamp=f;-1!==X.nDetectsPerLoop?P.G=X.nDetectsPerLoop:(f=x.Ia,P.Ib=P.Hb/P.ka,P.Jb=P.Ib*f+P.Jb*(1-f),P.Kb=1E3/P.ka,P.da=P.Kb*x.Ia+P.da*(1-x.Ia),P.da>x.aa[1]?(f=x.sa[1],1<D.i&&(++f,q=S.filter(G).length,
    f*=Math.max(1,q)),P.G=Math.min(P.G+1,f),P.da=(x.aa[0]+x.aa[1])/2):P.da<x.aa[0]&&(P.G=Math.max(P.G-1,x.sa[0]),P.da=(x.aa[0]+x.aa[1])/2));I.J();a.viewport(0,0,3,2*D.i);t.set("s49");ya.b(0);M.g(!1,!1);a.readPixels(0,0,3,2*D.i,a.RGBA,a.UNSIGNED_BYTE,Aa);for(f=0;f<D.i;++f)if(-1!==D.K.indexOf(f)){var V=f;q=Ba[V];var R=[V];A=S[V];var ka=na[V],ua=2*V;q.wa=H(1,ua,3,0,1);A.detected=la(A.detected,q.wa,x.Zb);if(q.wa<x.Xa)J.ba&&(A.rz=0);else{q.x=H(0,ua,1,-1,1);q.y=H(0,ua,2,-1,1);q.M=H(0,ua,3,0,1);q.$a=H(1,ua,
    0,-Q[0],Q[0]);q.ab=H(1,ua,1,-Q[1],Q[1]);q.oa=H(1,ua,2,-Q[2],Q[2]);for(var Ha=0;Ha<x.Ca;++Ha)q.qb[Ha]=x.tc[Ha](H(2,ua,Ha,0,1));R.Oa=q.x-A.x;R.Pa=q.y-A.y;R.Na=q.M-A.s;R.Ka=q.$a-A.rx;R.La=q.ab-A.ry;R.Ma=J.ba?q.oa:q.oa-A.rz;ua=Math.sqrt(R.Oa*R.Oa+R.Pa*R.Pa+R.Na*R.Na)/P.ka;R=Math.sqrt(R.Ka*R.Ka+R.La*R.La+R.Ma*R.Ma)/P.ka;ua=1-Ca(ta.translationFactorRange[0],ta.translationFactorRange[1],ua);R=1-Ca(ta.rotationFactorRange[0],ta.rotationFactorRange[1],R);R=ua*R*Ca(ta.qualityFactorRange[0],ta.qualityFactorRange[1],
    q.wa);V=ka[++pa[V]%ka.length]=R;for(ua=0;ua<ka.length;++ua)V=Math.min(V,ka[ua]);V=Math.max(.5,V);R=Math.min(V,R);ka=la(ta.alphaRange[1],ta.alphaRange[0],Math.pow(R,x.ac));A.x=la(A.x,q.x,ka);A.y=la(A.y,q.y,ka);A.s=la(A.s,q.M,ka);A.rx=la(A.rx,q.$a,ka);A.ry=la(A.ry,q.ab,ka);A.rz=J.ba?A.rz+ka*q.oa:la(A.rz,q.oa,ka);ka=Math.max(ka,x.$b);for(V=0;V<x.Ca;++V)A.expressions[V]=la(A.expressions[V],q.qb[V],ka);++q.Ba}}I.ed();I.reset();Y.reset();a.enable(a.DEPTH_TEST);J.va&&(1===D.i?J.va(S[0]):J.va(S));a.disable(a.BLEND);
    W===L.play&&(v=window.requestAnimationFrame(O))}}function C(){function f(A){for(var V=[],R=0;R<D.i;++R)V.push(Object.assign({},A));return V}z.ra=Y.a({isPot:!1,isLinear:!0,isFloat:!1,width:Z,height:ba});xa=Y.a({isPot:!0,isFloat:!1,width:sa.sb()});var q={width:3,height:D.i,isFloat:!0,isPot:!1,array:function(A){for(var V=new Float32Array(A.length*D.i),R=0,ka;R<D.i;++R)for(ka=0;ka<A.length;++ka)V[R*A.length+ka]=A[ka];return V}(new Float32Array([0,X.borderWidth,X.borderHeight,0,0,0,0,0,0,0,0,0]))};ya=
    Na.a(q);Aa=new Uint8Array(8*q.width*D.i);Ba=f({wa:0,x:0,y:0,M:1,$a:0,ab:0,oa:0,qb:new Float32Array(x.Ca),Ba:0});S=f({detected:0,x:0,y:0,s:1,rx:0,ry:0,rz:0,expressions:new Float32Array(x.Ca)});f({Oa:0,Pa:0,Na:0,Ka:0,La:0,Ma:0})}function da(){t.H("s51",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u35",value:1},{type:"2f",name:"u36",value:qa},{type:"1f",name:"u37",value:.5},{type:"1f",name:"u38",value:0}]);t.H("s52",[{type:"1i",name:"u39",value:0},{type:"1i",name:"u35",value:1},{type:"1f",name:"u42",
    value:x.dd},{type:"1f",name:"u43",value:x.Wb},{type:"1f",name:"u44",value:x.Vb},{type:"3f",name:"u41",value:[x.cb[0]*qa[0],x.cb[1]*qa[1],x.cb[2]]},{type:"1f",name:"u37",value:.5},{type:"1f",name:"u45",value:1},{type:"1f",name:"u38",value:0}]);var f=[{type:"1i",name:"u39",value:0}];t.H("s53",f);t.H("s54",f);t.H("s49",[{type:"1i",name:"u35",value:0},{type:"1f",name:"u48",value:qa[0]},{type:"2f",name:"u47",value:[0,.5/D.i]}])}function wa(){var f=sa.sb(),q=Z/f;l=X.minScale*q;r=X.maxScale*q;n=(1-2*X.borderWidth)/
    X.nStepsX;p=(1-2*X.borderHeight)/X.nStepsY;h=(r-l)/X.nStepsScale;w=X.borderWidth;u=X.borderHeight;E=1-X.borderWidth;F=1-X.borderHeight;qa=[f/Z,f/ba];b=X.borderWidth;d=X.borderHeight;e=l;k=X.borderWidth;m=X.borderHeight;ma=l}function Da(f){if(J.ea)va("string"===typeof J.ea?JSON.parse(J.ea):J.ea,f);else{var q=J.fb;"JSON"!==q.toUpperCase().split(".").pop()&&(q+=x.save);za(q,function(A){A=JSON.parse(A);va(A,f)})}}function va(f,q){f.exportData&&f.exportData.thetaXYZfactor&&(Q=f.exportData.thetaXYZfactor);
    q(f)}function ca(){if(Ma.l({ja:J.N,width:Z,height:ba,debug:!1,Nc:function(){ia("GLCONTEXT_LOST")},antialias:!0,premultipliedAlpha:!0})){if(Ma.Ec())return!0;ia("GL_INCOMPATIBLE");return!1}ia("GL_INCOMPATIBLE");return!1}function c(f){return f.detected<x.Xa}function G(f){return f.detected>x.Xa}function K(f,q,A,V){return A>f?Math.max(0,f+q/2-(A-V/2)):Math.max(0,A+V/2-(f-q/2))}function U(){return Ba.some(function(f,q){if(q===D.U)return!1;q=Ba[D.U];if(q.Ba>f.Ba||3>f.Ba||K(q.x/2,q.M,f.x/2,f.M)<x.Fb*q.M)return!1;
    var A=Z/ba;return K(q.y/2,q.M*A,f.y/2,f.M*A)>x.Fb*q.M*A})}function fa(){var f=D.U;ya.Wc(1);1!==D.i&&(a.viewport(0,0,3,D.i),t.set("s0"),t.Qb("u1",1),M.g(!1,!1),t.Qb("u1",0));a.viewport(0,f,1,1);t.set("s52");J.ba&&t.v("u38",S[f].rz);1!==D.i&&t.v("u37",D.Ya);if(1<D.i){var q=U()?0:1;t.v("u45",q)}t.Yc("u40",k,m,ma);M.g(!1,!1);D.Ab&&(a.viewport(1,f,1,1),t.set("s53"),M.g(!1,!1),a.viewport(2,f,1,1),t.set("s54"),M.g(!1,!1));e+=h;e>r&&(b+=n,e=l,b>E&&(b=w,d+=p,d>F&&(d=u)));k=b+.8*(Math.random()-.5)*n;m=d+.8*
    (Math.random()-.5)*p;ma=e+.8*(Math.random()-.5)*h}function ea(){z.qa=Y.a({D:z.element,isPot:!1,isFloat:!1,isFlipY:!0})}function ja(){t.H("s50",[{type:"1i",name:"u1",value:0},{type:"mat2",name:"u34",value:z.o}])}function ra(){z.C[0]=.5;z.C[1]=.5;var f=z.O[1]/z.O[0],q=Ma.L()/Ma.A();90===Math.abs(y.rotate)&&(f=1/f);f>q?z.C[1]*=q/f:z.C[0]*=f/q;t.H("s52",[{name:"u46",type:"1f",value:q}]);z.o[0]=0;z.o[1]=0;z.o[2]=0;z.o[3]=0;switch(y.rotate){case 0:z.o[0]=z.C[0];z.o[3]=z.C[1];break;case 180:z.o[0]=-z.C[0];
    z.o[3]=-z.C[1];break;case 90:z.o[1]=z.C[0];z.o[2]=-z.C[1];break;case -90:z.o[1]=-z.C[0],z.o[2]=z.C[1]}y.flipX&&(z.o[0]*=-1,z.o[2]*=-1)}function ha(f,q){if(W===L.error)return!1;var A=f.videoHeight;z.O[0]=f.videoWidth;z.O[1]=A;z.element=f;q&&q();return!0}function oa(f,q,A){f&&f();f={video:{facingMode:{ideal:y.facingMode},width:{min:y.minWidth,max:y.maxWidth,ideal:y.idealWidth},height:{min:y.minHeight,max:y.maxHeight,ideal:y.idealHeight}},audio:!1};y.deviceId&&(f.deviceId=y.deviceId);kb(function(V){q&&
  q(V);A(V)},function(){ia("WEBCAM_UNAVAILABLE")},f)}function ia(f){W!==L.error&&(W=L.error,J.ia&&J.ia(f))}function aa(f,q){for(var A in f)"undefined"!==typeof q[A]&&(f[A]=q[A]);q===X&&X.nDetectsPerLoop&&(P.G=X.nDetectsPerLoop,P.Hb=X.nDetectsPerLoop)}var x={save:"NNC.json",ib:0,bc:25,Ia:.2,aa:[45,55],jd:1/3.5,sa:[2,7],Qc:{minScale:.15,maxScale:.6,borderWidth:.2,borderHeight:.2,nStepsX:6,nStepsY:5,nStepsScale:3,nDetectsPerLoop:-1},cb:[.092,.092,.3],dd:50,Fb:.12,
    Xa:.6,Kc:8,Wb:.75,Vb:1,bd:{translationFactorRange:[.0015,.005],rotationFactorRange:[.003,.02],qualityFactorRange:[.9,.98],alphaRange:[.05,1]},cd:[.65,1,.262],Zb:.2,ac:2,$b:.1,Lc:8,Ca:1,tc:[Ca.bind(null,.3,.75)],gd:20},y={facingMode:"user",idealWidth:800,idealHeight:600,minWidth:480,maxWidth:1280,minHeight:480,maxHeight:1280,rotate:0,flipX:!1},L={Hc:-1,error:-2,vb:0,play:1,pause:2},W=L.vb,z={Va:!1,element:!1,qa:!1,ra:!1,O:[0,0],C:[.5,.5],o:[.5,0,0,.5],Da:0},J={ia:!1,va:!1,fb:"./",ea:!1,N:!1,ta:x.ib,
    Mb:x.ib,Aa:!1,ba:!1},sa,X=Object.create(x.Qc),ta=Object.create(x.bd);var ma=e=m=k=d=b=r=l=F=E=u=w=h=p=n=0;var Z,ba,qa,xa,ya,Aa,Ba,S,Ea=!1,v=!1,Q=x.cd,D={i:1,U:0,K:[0],Ab:!1,Db:0,Ya:0},P={ka:0,timestamp:0,Ib:0,Jb:0,G:x.sa[0],Hb:x.sa[0],Kb:0,da:0,pd:1},na=[],pa=[];return{init:function(f){function q(){W!==L.error&&2===++V&&(ra(),ea(),ja(),J.ia&&(J.ia(!1,{GL:a,canvasElement:J.N,videoTexture:z.ra.get(),maxFacesDetected:D.i,videoElement:z.element}),g()),T())}if(W!==L.vb)return f.callbackReady&&f.callbackReady("ALREADY_INITIALIZED"),
      !1;W=L.Hc;f.callbackReady&&(J.ia=f.callbackReady);f.callbackTrack&&(J.va=f.callbackTrack);"undefined"!==typeof f.animateDelay&&(J.ta=f.animateDelay);"undefined"!==typeof f.NNCpath&&(J.fb=f.NNCpath);"undefined"!==typeof f.NNC&&(J.ea=f.NNC);"undefined"!==typeof f.maxFacesDetected&&(D.i=Math.max(1,f.maxFacesDetected));"undefined"!==typeof f.followZRot&&(J.ba=f.followZRot?!0:!1);if(D.i>x.Kc)return ia("MAXFACES_TOOHIGH"),!1;if(!f.canvasId&&!f.canvas)return ia("NO_CANVASID"),!1;J.N=f.canvas?f.canvas:document.getElementById(f.canvasId);
      if(!J.N)return ia("INVALID_CANVASID"),!1;Z=J.N.width;ba=J.N.height;if(!Z||!ba)return ia("INVALID_CANVASDIMENSIONS"),!1;for(var A=0;A<D.i;++A)na.push(new Float32Array(x.Lc)),pa.push(0);f.scanSettings&&aa(X,f.scanSettings);f.stabilizationSettings&&aa(ta,f.stabilizationSettings);var V=0;f.videoSettings&&f.videoSettings.videoElement?ha(f.videoSettings.videoElement,q):(f.videoSettings&&aa(y,f.videoSettings),oa(f.onWebcamAsk,f.onWebcamGet,function(R){ha(R,q)}));Da(function(R){if(!ca())return!1;sa=new Za;
        sa.Sc(R.layers);sa.Uc({Lb:"gpuRawAvg",Oc:fa});t.Yb([{id:"s50",name:"_",$:"attribute vec2 a0;uniform mat2 u34;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5,.5)+u34*a0;}",ua:["a0"],fa:[2],c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:["u1","u34"],precision:"lowp"},{id:"s51",name:"_",c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",$:"attribute vec2 a0;uniform sampler2D u35;uniform vec2 u36;uniform float u37,u38;varying vec2 vv0;void main(){vec4 a=texture2D(u35,vec2(.17,u37));vec2 d=a.gb,e=a.a*u36;float b=cos(u38),c=sin(u38);vec2 g=mat2(b,c,-c,b)*a0;vv0=d+g*.5*e,gl_Position=vec4(a0,0.,1.);}",
          ua:["a0"],fa:[2],f:["u1","u35","u36","u37","u38"],precision:"lowp"},{id:"s52",name:"_",c:"uniform sampler2D u39,u35;uniform vec3 u40,u41;uniform float u42,u43,u44,u37,u45,u38,u46;const vec4 n=vec4(1.,1.,1.,1.),o=vec4(0.,0.,0.,0.),e=vec4(.25,.25,.25,.25);void main(){vec4 g=texture2D(u39,vec2(.625,.625)),h=texture2D(u39,vec2(.875,.625)),a=texture2D(u35,vec2(.17,u37));float b=dot(g,e),i=dot(h,e);bool j=b>u43&&b>i+u44;j?a.r=2.:a.r>u42?a.r=0.:a.r>1.9?a.r+=1.:0.,a.r*=u45;if(a.r<.9)a=vec4(1.,u40);else{a.r*=step(1.9,a.r);float k=dot(e,texture2D(u39,vec2(.875,.875))),l=dot(e,texture2D(u39,vec2(.125,.625))),m=dot(e,texture2D(u39,vec2(.375,.625))),c=cos(u38),d=sin(u38);vec2 f=mat2(c,d*u46,-d/u46,c)*vec2(k,l);a.gba+=vec3(f,m)*u41*a.a;}gl_FragColor=a;}",
          $:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",f:"u39 u35 u40 u42 u41 u45 u38 u46 u43 u44 u37".split(" ")},{id:"s53",name:"_",$:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",c:"uniform sampler2D u39;const vec4 e=vec4(.25,.25,.25,.25);const vec3 g=vec3(.5,.5,.5);void main(){float a=dot(e,texture2D(u39,vec2(.125,.875))),b=dot(e,texture2D(u39,vec2(.375,.875))),c=dot(e,texture2D(u39,vec2(.625,.875))),d=dot(e,texture2D(u39,vec2(.625,.625)));vec3 f=vec3(a,b,c)*.5+g;gl_FragColor=vec4(f,d);}",
          f:["u39"]},{id:"s54",name:"_",$:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",c:"uniform sampler2D u39;const vec4 e=vec4(.25,.25,.25,.25);void main(){float a=dot(e,texture2D(u39,vec2(.25,.25)));gl_FragColor=vec4(a,0.,0.,0.);}",f:["u39"]},{id:"s49",name:"_",c:"uniform sampler2D u35;uniform vec2 u47;uniform float u48;varying vec2 vv0;void main(){float g=step(.5,mod(gl_FragCoord.y+1.5,2.)),c=step(.33,vv0.x);vec4 a=texture2D(u35,vv0+u47);a.a=mix(a.a*u48,a.a,c);vec4 d=floor(255.*a),f=255.*(255.*a-d),b=mix(d,f,g)/255.;b.x=mix(step(a.x,1.5),b.x,c),gl_FragColor=b;}",
          f:["u35","u48","u47"]}]);C();wa();da();q()});return!0},toggle_pause:function(f){if(N())return f?W!==L.play?f=!1:(Ea&&(clearTimeout(Ea),Ea=!1),v&&(window.cancelAnimationFrame(v),v=!1),W=L.pause,f=!0):f=T(),f},toggle_slow:function(f){N()&&W===L.play&&(f&&!J.Aa?(J.Mb=J.ta,X.nDetectsPerLoop=1,this.set_animateDelay(100),J.Aa=!0):!f&&J.Aa&&(X.nDetectsPerLoop=-1,this.set_animateDelay(J.Mb),J.Aa=!1))},set_animateDelay:function(f){J.ta=f},resize:function(){var f=J.N.width,q=J.N.height;if(f===Z&&q===ba)return!1;
      Z=f;ba=q;wa();da();ra();ja();return!0},set_inputTexture:function(f,q,A){z.O[0]=q;z.O[1]=A;z.Va=!0;ra();g();ja();t.set("s50");z.ra.B();a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,f);M.g(!0,!0)},reset_inputTexture:function(){z.O[0]=z.element.videoWidth;z.O[1]=z.element.videoHeight;z.Va=!1;ra();ja()},get_videoDevices:function(f){return lb(f)},set_scanSettings:function(f){aa(X,f);wa();da()},set_stabilizationSettings:function(f){aa(ta,f)},set_videoOrientation:function(f,q){N()&&(y.flipX=q,y.rotate=
      f,ra(),ja())},update_videoElement:function(f,q){ha(f,function(){ea();ra();q&&q()})}}}();
;if(typeof(module)!=='undefined'){module.exports=JEEFACEFILTERAPI;}
